---
import BaseLayout from './BaseLayout.astro'
import Library from '../components/Library'
import type { Locals } from '../middleware';

interface Props {
  title: string;
}

const { title } = Astro.props;
const navLinks = [
  { href: '/home', text: 'Home' },
  { href: '/user-info-test', text: 'user json dump' },
  { href: '/playlist-tagging-test', text: 'tagging test' },
];

const url = new URL(Astro.request.url);

const sdkProps = (Astro.locals as Locals).sdkProps;
---
<BaseLayout title={title}>
  <div class="p-2 bg-zinc-950 h-full flex flex-row gap-2">
    <aside class="w-96 flex flex-col gap-2">
      <nav class="p-4 bg-zinc-900 rounded-lg">
        <ul>
          {navLinks.map(navLink => (
            <li class="text-lg transition-colors duration-150 ease-in-out active:text-white hover:text-white" class:list={[url.pathname == navLink.href ? "text-white" : "text-gray-400"]}>
              <a href={navLink.href}>{navLink.text}</a>
            </li>
          ))}
        </ul>
      </nav>
      <div class="p-4 flex-grow overflow-y-hidden bg-zinc-900 rounded-lg">
        <Library sdkProps={sdkProps} client:load/>
      </div>
    </aside>
    <slot />
  </div>
</BaseLayout>